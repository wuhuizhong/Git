var materialCards=function(){"use strict";var a={version:"1.0",escapeHTML:function(a){if(null===a)return null;if(void 0!==a){if("object"==typeof a)try{a=JSON.stringify(a)}catch(a){}try{return apex.util.escapeHTML(String(a))}catch(e){return(a=String(a)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}}},loader:{start:function(a){try{apex.util.showSpinner($(a))}catch(r){var e=$("<span></span>");e.attr("id","loader"+a),e.addClass("ct-loader fa-stack fa-3x");var t=$("<i></i>");t.addClass("fa fa-circle fa-stack-2x"),t.css("color","rgba(121,121,121,0.6)");var s=$("<i></i>");s.addClass("fa fa-refresh fa-spin fa-inverse fa-stack-1x"),s.css("animation-duration","1.8s"),e.append(t),e.append(s),$(a).append(e)}},stop:function(a){$(a+" > .u-Processing").remove()}},jsonSaveExtend:function(a,e){var t={};if("string"==typeof e)try{e=JSON.parse(e)}catch(a){console.log("Error while try to parse udConfigJSON. Please check your Config JSON. Standard Config will be used."),console.log(a),console.log(e)}else t=e;try{t=$.extend(!0,a,e)}catch(e){console.log("Error while try to merge udConfigJSON into Standard JSON if any attribute is missing. Please check your Config JSON. Standard Config will be used."),console.log(e),t=a,console.log(t)}return t},noDataMessage:{show:function(a,e){var t=$("<div></div>").css("margin","12px").css("text-align","center").css("padding","64px 0"),s=$("<div></div>"),r=$("<span></span>").addClass("fa").addClass("fa-search").addClass("fa-2x").css("height","32px").css("width","32px").css("color","#D0D0D0").css("margin-bottom","16px");s.append(r);var n=$("<span></span>").addClass("nodatafoundmessage").text(e).css("display","block").css("color","#707070").css("font-size","12px");t.append(s).append(n),$(a).append(t)},hide:function(a){$(a).children(".nodatafoundmessage").remove()}}};return{initialize:function(e,t,s,r,n,i,d){function o(t){A.empty();var r=function(a){var e=$("<div></div>");return e.addClass("s-g-row"),a.append(e),e}(A);t.row&&t.row.length>0?function(t,s,r){s&&s.length>0&&$.each(s,function(s,n){!1!==d&&(n.CARD_ICON=a.escapeHTML(n.CARD_ICON),n.CARD_ICON_COLOR=a.escapeHTML(n.CARD_ICON_COLOR),n.CARD_HEADER_STYLE=a.escapeHTML(n.CARD_HEADER_STYLE),n.CARD_TITLE=a.escapeHTML(n.CARD_TITLE),n.CARD_VALUE=a.escapeHTML(n.CARD_VALUE),n.CARD_FOOTER=a.escapeHTML(n.CARD_FOOTER)),n.CARD_TYPE?"icon"===n.CARD_TYPE.toLowerCase()?l(s,t,n,r):function(a,t,s,r,n){var i="background: linear-gradient(60deg, hsl("+23*a%350+", 55%, 60%), hsl("+23*a%350+", 50%, 60%));box-shadow: 0 12px 20px -10px rgba(230, 230, 230, 0.28), 0 4px 20px 0px rgba(0, 0, 0, 0.12), 0 7px 8px -5px rgba(230, 230, 230, 0.2);",d={fullWidth:!0,chartPadding:{bottom:-12,top:28,right:30,left:-5}},o={};if(n&&"string"==typeof n)try{o=JSON.parse(n)}catch(a){console.log("Error while try to parse CARD_CHART_CONFIG: "+a+n)}else o=n;$.extend(!0,d,o);var c="ct-chart-"+e+a,l=$("<div></div>");l.addClass("s-g-col-"+r.cardWidth);var p=$("<div></div>");p.addClass("at-card");var C=$("<div></div>");C.addClass("card-header card-chart"),C.attr("style",s.CARD_HEADER_STYLE||i);var A=$("<div></div>");A.addClass("ct-chart"),A.attr("id",c),C.append(A),p.append(C);var v=$("<div></div>");v.addClass("card-content");var f=void 0!=s.CARD_TITLE&&s.CARD_TITLE.length>0?s.CARD_TITLE:"";v.append('<p class="category">'+f+"</p>");var h=void 0!=s.CARD_VALUE&&s.CARD_VALUE.length>0?s.CARD_VALUE:"-";v.append('<h2 class="title">'+h+"</h2>"),p.append(v);var g=$("<div></div>");g.addClass("card-footer");var R=$("<div></div>");s.CARD_FOOTER&&((R=$("<div></div>")).addClass("stats"),R.append(s.CARD_FOOTER));if(g.append(R),p.append(g),l.append(p),s.CARD_LINK){var _=$("<a></a>");_.attr("href",s.CARD_LINK),_.append(l),t.append(_)}else t.append(l);var D;if(s.CARD_CHART_DATA){var T={};if("string"==typeof s.CARD_CHART_DATA)try{T=JSON.parse(s.CARD_CHART_DATA)}catch(a){console.log("Error while try to parse CARD_CHART_DATA"),console.log(a),console.log(s.CARD_CHART_DATA)}else T=s.CARD_CHART_DATA;switch(s.CARD_TYPE.toLowerCase()){case"chart-line":D=new Chartist.Line("#"+c,T,d);break;case"chart-bar":D=new Chartist.Bar("#"+c,T,d);break;case"chart-pie":d.chartPadding={},D=new Chartist.Pie("#"+c,T,d);break;default:console.log("No valid Chart type")}var u=void 0!=s.CARD_ICON_COLOR&&s.CARD_ICON_COLOR.length>0?s.CARD_ICON_COLOR:"white";D.on("draw",function(a){var e={};if(s.CARD_CHART_DATA&&"string"==typeof s.CARD_CHART_DATA)try{e=JSON.parse(s.CARD_CHART_DATA)}catch(a){console.log("Error while try to parse CARD_CHART_CONFIG: "+a+n)}else e=s.CARD_CHART_DATA;e.colors&&(u=e.colors[a.index]||e.colors[0]),"bar"!==a.type&&"line"!==a.type&&"point"!==a.type||(d.strokeWidth?a.element.attr({style:"stroke:  "+u+"; stroke-width:"+d.strokeWidth+"px;"}):a.element.attr({style:"stroke:  "+u})),"slice"===a.type&&a.element.attr({style:"fill: "+u+"; fill-opacity: "+(e.colors?.6:(a.index%10+2)/10)}),"area"===a.type&&a.element.attr({style:"fill: "+u+"; fill-opacity: "+(a.index%10+2)/10}),!0===d.donut&&(d.sliceWidth&&$(A).find(".ct-slice-donut").css("stroke-width",d.sliceWidth.toString()+"px"),a.element.attr({style:"stroke-opacity: "+(-a.index%10+10)/10+"; stroke:  "+u}),$(A).find(".ct-label").css("stroke","initial"),$(A).find(".ct-label").css("fill",e.colors?"white":u)),$(A).find(".ct-slice-pie").attr("stroke",e.colors?"rgba(0,0,0,0)":u),$(A).find(".ct-slice-donut").attr("stroke",u),$(A).find(".ct-label").css("color",e.colors?"white":u),$(A).find(".ct-grid").css("stroke",e.colors?"white":u),$(A).find(".ct-grid").css("opacity",".4")})}}(s,t,n,r,n.CARD_CHART_CONFIG):l(s,t,n,r)})}(r,t.row,C):(A.css("min-height",""),a.noDataMessage.show(r,s))}function c(){if(t){a.loader.start(A);var e=n;apex.server.plugin(t,{pageItems:e},{success:o,error:function(a){A.empty(),console.log(a.responseText)},dataType:"json"})}else try{a.loader.start(A),setTimeout(function(){o(dataJSON)},500)}catch(a){console.log("need data json"),console.log(a)}}function l(a,e,t,s){var r="background: linear-gradient(60deg, hsl("+23*a%350+", 55%, 60%), hsl("+23*a%350+", 50%, 60%));box-shadow: 0 12px 20px -10px rgba(230, 230, 230, 0.28), 0 4px 20px 0px rgba(0, 0, 0, 0.12), 0 7px 8px -5px rgba(230, 230, 230, 0.2);",n=$("<div></div>");n.addClass("s-g-col-"+s.cardWidth);var i=$("<div></div>");i.addClass("at-card at-card-stats");var d=$("<div></div>");if(d.addClass("card-header"),t.CARD_ICON){var o=$("<i></i>");o.addClass("fa "+t.CARD_ICON);var c=void 0!=t.CARD_ICON_COLOR&&t.CARD_ICON_COLOR.length>0?t.CARD_ICON_COLOR:"white";o.attr("style","color:"+c),d.append(o)}d.attr("style",t.CARD_HEADER_STYLE||r),i.append(d);var l=$("<div></div>");l.addClass("card-content");var p=void 0!=t.CARD_TITLE?t.CARD_TITLE:"";l.append('<p class="category">'+p+"</p>");var C=void 0!=t.CARD_VALUE?t.CARD_VALUE:"";l.append('<h2 class="title">'+C+"</h2>"),i.append(l);var A=$("<div></div>");A.addClass("card-footer");var v=$("<div></div>");if(t.CARD_FOOTER&&((v=$("<div></div>")).addClass("stats"),v.append(t.CARD_FOOTER)),A.append(v),i.append(A),n.append(i),t.CARD_LINK){var f=$("<a></a>");f.attr("href",t.CARD_LINK),f.append(n),e.append(f)}else e.append(n)}var p=$("#"+e);if(p.length>0){var C={};C=a.jsonSaveExtend({cardWidth:4,refresh:0},r);var A=function(a){var e=$("<div></div>");return e.addClass("s-g-container"),e.css("min-height","170px"),a.append(e),e}(p);c();try{apex.jQuery("#"+i).bind("apexrefresh",function(){0==A.children("span").length&&c()})}catch(a){console.log("Can't bind refresh event on "+i+". Apex is missing"),console.log(a)}C.refresh>0&&setInterval(function(){0==A.children("span").length&&c()},1e3*C.refresh)}else console.log("Can't find parentID: "+e)}}}();